var C=(n,t,s)=>new Promise((x,g)=>{var w=r=>{try{f(s.next(r))}catch(_){g(_)}},D=r=>{try{f(s.throw(r))}catch(_){g(_)}},f=r=>r.done?x(r.value):Promise.resolve(r.value).then(w,D);f((s=s.apply(n,t)).next())});import{g as O}from"./index-BaErDL7B.js";import{u as F}from"./useTable-Da4FFmJZ.js";import{c as G,I as H,i as c}from"./index-DgQ-X92v.js";import{_ as J}from"./Table.vue_vue_type_script_lang-DeE_lKpi.js";/* empty css               */import{_ as K}from"./Search.vue_vue_type_script_setup_true_lang-D0ucoykI.js";import{_ as U}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DEsZYC2_.js";import{_ as q}from"./Write.vue_vue_type_script_setup_true_lang-CDJhvQ1x.js";import{_ as z}from"./Detail.vue_vue_type_script_setup_true_lang-CCmsQeTO.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-C8hWq84B.js";import{p as W}from"./element-plus-B5Fb1RnA.js";import{v as X,V as M,M as a,H as p,r as i,x as y,y as Y,K as d,u as l,B as Z,a3 as $,P as N,J as R,G as S,a7 as ee}from"./vue-chunks-mpUGqK7y.js";/* empty css                        *//* empty css                    *//* empty css                  *//* empty css                      *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                */import"./el-radio-button-Be7yL7Cc.js";/* empty css                         *//* empty css                  */import"./index-TGz-Lyky.js";import"./Form-DUQyGqvj.js";/* empty css                     *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-CEZnUv9K.js";import"./style.css_vue_type_style_index_0_src_true_lang-DZB8p0Kd.js";import"./wang-editor-1CUj_mB-.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-D6GE5nYx.js";import"./IconPicker-BUf5lMD6.js";import"./IAgree.vue_vue_type_script_setup_true_lang-CPN1VsPg.js";import"./Highlight.vue_vue_type_script_lang-nN4JcZTc.js";import"./useForm-BSFk0zYA.js";import"./useIcon-D9C40LSZ.js";import"./useValidator-Dn6mhT4y.js";import"./AddButtonPermission.vue_vue_type_script_setup_true_lang-DgKFnG75.js";import"./Descriptions-CQEUwfqZ.js";const te={class:"mb-10px"};function T(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ee(n)}const qe=X({__name:"Menu",setup(n){const{t}=G(),{tableRegister:s,tableState:x,tableMethods:g}=F({fetchDataApi:()=>C(this,null,function*(){return{list:(yield O()).data.list||[]}})}),{dataList:w,loading:D}=x,{getList:f}=g,r=M([{field:"index",label:t("userDemo.index"),type:"index"},{field:"meta.title",label:t("menu.menuName"),slots:{default:o=>{const e=o.row.meta.title;return a(p,null,[e])}}},{field:"meta.icon",label:t("menu.icon"),slots:{default:o=>{const e=o.row.meta.icon;return e?a(p,null,[a(H,{icon:e},null)]):null}}},{field:"component",label:t("menu.component"),slots:{default:o=>{const e=o.row.component;return a(p,null,[e==="#"?"顶级目录":e==="##"?"子目录":e])}}},{field:"path",label:t("menu.path")},{field:"status",label:t("menu.status"),slots:{default:o=>a(p,null,[a(W,{type:o.row.status===0?"danger":"success"},{default:()=>[o.row.status===1?t("userDemo.enable"):t("userDemo.disable")]})])}},{field:"action",label:t("userDemo.action"),width:240,slots:{default:o=>{let e,u,V;const L=o.row;return a(p,null,[a(c,{type:"primary",onClick:()=>I(L,"edit")},T(e=t("exampleDemo.edit"))?e:{default:()=>[e]}),a(c,{type:"success",onClick:()=>I(L,"detail")},T(u=t("exampleDemo.detail"))?u:{default:()=>[u]}),a(c,{type:"danger"},T(V=t("exampleDemo.del"))?V:{default:()=>[V]})])}}}]),_=M([{field:"meta.title",label:t("menu.menuName"),component:"Input"}]),j=i({}),B=o=>{j.value=o,f()},m=i(!1),k=i(""),b=i(),v=i(""),A=i(),h=i(!1),I=(o,e)=>{k.value=t(e==="edit"?"exampleDemo.edit":"exampleDemo.detail"),v.value=e,b.value=o,m.value=!0},P=()=>{k.value=t("exampleDemo.add"),b.value=void 0,m.value=!0,v.value=""},E=()=>C(this,null,function*(){const o=l(A),e=yield o==null?void 0:o.submit();e&&(h.value=!0,setTimeout(()=>{h.value=!1,m.value=!1},1e3))});return(o,e)=>(y(),Y(p,null,[a(l(U),null,{default:d(()=>[a(l(K),{schema:_,onReset:B,onSearch:B},null,8,["schema"]),Z("div",te,[a(l(c),{type:"primary",onClick:P},{default:d(()=>[$(N(l(t)("exampleDemo.add")),1)]),_:1})]),a(l(J),{columns:r,"default-expand-all":"","node-key":"id",data:l(w),loading:l(D),onRegister:l(s)},null,8,["columns","data","loading","onRegister"])]),_:1}),a(l(Q),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=u=>m.value=u),title:k.value},{footer:d(()=>[v.value!=="detail"?(y(),R(l(c),{key:0,type:"primary",loading:h.value,onClick:E},{default:d(()=>[$(N(l(t)("exampleDemo.save")),1)]),_:1},8,["loading"])):S("",!0),a(l(c),{onClick:e[0]||(e[0]=u=>m.value=!1)},{default:d(()=>[$(N(l(t)("dialogDemo.close")),1)]),_:1})]),default:d(()=>[v.value!=="detail"?(y(),R(q,{key:0,ref_key:"writeRef",ref:A,"current-row":b.value},null,8,["current-row"])):S("",!0),v.value==="detail"?(y(),R(z,{key:1,"current-row":b.value},null,8,["current-row"])):S("",!0)]),_:1},8,["modelValue","title"])],64))}});export{qe as default};
